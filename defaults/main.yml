---
#Default user for asterisk install.
asterisk_user:      asteriskbpx
asterisk_group:     asteriskbpx

asterisk_install_method: source

#Paths for source and cache
data_dir:           "{{asterisk_dir}}"
source_dir:         "{{data_dir}}/source"
cache_dir:          "{{data_dir}}/cache"

#Default configurations, that should be used if no other override is supplied:
dahdi:
  vcs: subversion
  url: http://svn.asterisk.org/svn/dahdi/linux-complete/tags/2.6.1+2.6.1
  dest: "{{source_dir}}/dahdi"
  make: make
  install: make install && make config

libpri:
  vcs: subversion
  url: http://svn.asterisk.org/svn/libpri/tags/1.4.14
  dest: "{{source_dir}}/libpri"
  make: make
  install: make install

#pjproject:
#  vcs: git
#  url: https://github.com/asterisk/pjproject
#  dest: "{{source_dir}}/pjproject"
#  version: master
#  configure: ./configure --with-external-srtp --enable-shared CFLAGS="-DNDEBUG"
#  make: make dep && NDEBUG=1 make
#  install: make install
#
#asterisk:
#  vcs: subversion
#  url: http://svn.asterisk.org/svn/asterisk/trunk
#  dest: "{{source_dir}}/asterisk"
#  configure: ./configure --with-srtp --with-unixodbc --with-pjproject=/usr/local && sed -i "/#undef HAVE_PJ_TRANSACTION_GRP_LOCK/c\#define HAVE_PJ_TRANSACTION_GRP_LOCK=1" include/asterisk/autoconfig.h
#    # include patching step
#  make: curl https://gist.github.com/xytis/7820491/raw | patch -p0 && make
#  install: make install && make config

asterisk:
  vcs: subversion
  url: http://svn.asterisk.org/svn/asterisk/tags/11.5.1
  dest: "{{source_dir}}/asterisk"
  configure: echo "export CFLAGS= -DNDEBUG" > res/pjproject/user.mak && ./configure --with-srtp --with-unixodbc
    # include patching step
  make: curl https://gist.github.com/xytis/7820491/raw | patch -p0 && make
  install: make install && make config

